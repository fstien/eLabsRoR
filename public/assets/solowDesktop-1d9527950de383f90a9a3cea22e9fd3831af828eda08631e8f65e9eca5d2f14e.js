var isFirefox=typeof InstallTrigger!=="undefined";var fireShift=0;if(isFirefox){$(".symbol").css("padding-top",5);fireShift=4}else{$(".cell").css("display","inline-block")}window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,20)}})();function Graph(func,color,precision,width){var xx,yy,dx=1/precision,x0=padding.left,y0=padding.top+ID.height,scale=graphScale;var iMax=Math.round((ID.width)/dx);var iMin=0;context1.beginPath();context1.lineWidth=width;context1.strokeStyle=color;for(var i=iMin;i<=iMax;i++){xx=dx*i;yy=scale*func(xx/scale);if(y0-yy>padding.top){if(i==iMin){context1.moveTo(x0+xx,y0-yy)}else{context1.lineTo(x0+xx,y0-yy)}}}context1.stroke()}function showAxes(){var x0=padding.left,w=context1.canvas.width;var y0=padding.top+ID.height,h=context1.canvas.height;var xmin=ID.axesNegative?0:x0;context1.beginPath();context1.lineWidth="0";context1.fillStyle="#FDFDFD";context1.fillRect(plotX(0),plotY(1),plotX(1)-padding.left,plotX(1)-padding.left);context1.stroke();context1.closePath();context1.beginPath();context1.strokeStyle=ID.axesColor;context1.lineWidth=lineWidth.axes;context1.lineCap="round";context1.moveTo(xmin,y0);context1.lineTo(padding.left+ID.width,y0);context1.moveTo(x0,padding.top);context1.lineTo(x0,y0);context1.stroke()}function dottedIndex(){context1.strokeStyle=grey(color.g2);context1.setLineDash([10,8]);if(desktop){context1.lineWidth=1}else{context1.lineWidth=0.5}context1.beginPath();if(inter.b.x<max.x){if(inter.b.y<max.y){context1.moveTo(plotX(inter.b.x),padding.top+ID.height);context1.lineTo(plotX(inter.b.x),plotY(inter.b.y))}else{context1.moveTo(plotX(inter.b.x),padding.top+ID.height);context1.lineTo(plotX(inter.b.x),padding.top)}}if(inter.b.y<max.y){if(inter.b.x<max.x){context1.moveTo(padding.left,plotY(inter.b.y));context1.lineTo(plotX(inter.b.x),plotY(inter.b.y))}else{context1.moveTo(padding.left,plotY(inter.b.y));context1.lineTo((canvasGraph.width/GraphCanvasDisplayRatio)-padding.right,plotY(inter.b.y))}}if(inter.a.y<max.y){if(inter.b.x<max.x){context1.moveTo(padding.left,plotY(inter.a.y));context1.lineTo(plotX(inter.a.x),plotY(inter.a.y))}else{context1.moveTo(padding.left,plotY(inter.a.y));context1.lineTo((canvasGraph.width/GraphCanvasDisplayRatio)-padding.right,plotY(inter.a.y))}}context1.stroke();context1.closePath();if(desktop){context1.setLineDash([1000,1])}else{context1.setLineDash([1])}}var xIndexShift,yIndexShift1,yIndexShift2;function unitIndex(index){context1.beginPath();context1.strokeStyle=grey(color.g2);context1.lineWidth=index;context1.beginPath();context1.moveTo(plotX(index),padding.top+ID.height);context1.lineTo(plotX(index),plotY(index));context1.lineTo(padding.left,plotY(index));context1.stroke();context1.closePath();context1.beginPath();context1.font=font.index+"px Helvetica";context1.fillStyle=grey(color.g2);context1.strokeStyle=grey(color.g2);context1.textAlign="center";context1.textBaseline="hanging";if(plotX(inter.b.x)<plotX(1)-font.index||plotX(inter.b.x)>plotX(1)+font.index){context1.fillText("1",plotX(1),canvasGraph.height/GraphCanvasDisplayRatio-padding.bottom+font.index*font.paddingRatio)}context1.fillStyle=grey(m.g.indexColor.k);context1.font=font.index*m.g.indexSize.k+"px Helvetica";if(inter.b.x<max.x){context1.fillText(round10fixed(inter.b.x),plotX(inter.b.x),canvasGraph.height/GraphCanvasDisplayRatio-padding.bottom+font.index*font.paddingRatio)}context1.fillStyle=grey(color.g2);context1.font=font.index+"px Helvetica";context1.fillText("0",padding.left-font.index,canvasGraph.height/GraphCanvasDisplayRatio-padding.bottom+font.index*font.paddingRatio);context1.textAlign="end";context1.textBaseline="middle";context1.fillStyle=grey(color.g2);if((plotY(inter.b.y)<plotY(1)-font.index||plotY(inter.b.y)>plotY(1)+font.index)&&(plotY(inter.a.y)<plotY(1)-font.index||plotY(inter.a.y)>plotY(1)+font.index)){context1.fillText("1",padding.left-font.index*font.paddingRatio,plotY(1))}context1.fillStyle=grey(m.g.indexColor.y);context1.font=font.index*m.g.indexSize.y+"px Helvetica";if(inter.b.y<max.y){context1.fillText(round10fixed(inter.b.y),padding.left-font.index*font.paddingRatio,plotY(inter.b.y))}context1.fillStyle=grey(m.g.indexColor.i);context1.font=font.index*m.g.indexSize.i+"px Helvetica";if(inter.a.y<max.y&&(inter.a.y+font.index/v.unit<inter.b.y)){context1.fillText(round10fixed(inter.a.y),padding.left-font.index*font.paddingRatio,plotY(inter.a.y))}context1.textAlign="start";context1.textBaseline="hanging";context1.fillStyle=grey(m.g.indexColor.K);context1.font=font.index*font.indexRatio*m.g.indexSize.K+"px Helvetica";context1.fillText(text.index.x,canvasGraph.width/GraphCanvasDisplayRatio-padding.right+font.index/2,canvasGraph.height/GraphCanvasDisplayRatio-padding.bottom+font.index*font.paddingRatio);context1.textAlign="end";context1.textBaseline="alphabetic";context1.fillStyle=grey(m.g.indexColor.Y);context1.font=font.index*font.indexRatio*m.g.indexSize.Y+"px Helvetica";context1.fillText(text.index.y,padding.left-1.2*font.index*font.paddingRatio,padding.top-font.index/2);context1.fillStyle=grey(color.g2);context1.stroke();context1.closePath()}function getlength(number){return number.toString().length}var marginTop,oldWidth,oldHeight,graphScale,key;function resizecanvasGraph(){canvasLogic.width=canvasGraph.width/GraphCanvasDisplayRatio;canvasLogic.height=canvasGraph.height/GraphCanvasDisplayRatio;if(desktop){$("#container").height($(window).height()-menuHeight);divGraph.width=myLayout.center.state.layoutWidth;divGraph.height=$("#container").height();ratio.div=divGraph.height/divGraph.width}else{divGraph.width=$(window).width();divGraph.height=divGraph.width*ratio.canvasGraph+0.01;ratio.div=divGraph.height/divGraph.width}if(divGraph.width>sizeLimit.width&&divGraph.height>sizeLimit.height){if(ratio.div>ratio.canvasGraph){canvasLogic.width=divGraph.width;ID.width=divGraph.width-(padding.left+padding.right);ID.height=ratio.curves*ID.width;canvasLogic.height=ID.height+(padding.top+padding.bottom);graphScale=ID.height*ID.scale/10}if(ratio.div<ratio.canvasGraph){canvasLogic.height=divGraph.height;ID.height=divGraph.height-(padding.top+padding.bottom);ID.width=ID.height/ratio.curves;canvasLogic.width=ID.width+(padding.left+padding.right);graphScale=ID.height*ID.scale/10}if(desktop){marginTop=((divGraph.height)-(canvasLogic.height))/2;$("#canvasGraph").css("margin-top",marginTop)}}oldWidth=canvasLogic.width;oldHeight=canvasLogic.height;canvasGraph.width=oldWidth*GraphCanvasDisplayRatio;canvasGraph.height=oldHeight*GraphCanvasDisplayRatio;canvasGraph.style.width=oldWidth+"px";canvasGraph.style.height=oldHeight+"px";context1.scale(GraphCanvasDisplayRatio,GraphCanvasDisplayRatio);lineWidth.axes=Math.round((Math.sqrt(ID.width*ID.lineBasis/10)));lineWidth.graph=Math.round(Math.sqrt(ID.width*ID.lineBasis*ID.lineGraphRatio/10));if(desktop){font.index=lineWidth.graph*font.indexScale;if(font.index>font.table){font.index=font.table}}}var oldWidth2,containerWidth,textHeight;function resizecanvasControls(){if(desktop){containerWidth=myLayout.east.state.layoutWidth}else{containerWidth=$(window).width()}canvasControls.width=containerWidth*GraphCanvasDisplayRatio2;ControlCanvasLogic.width=canvasControls.width/GraphCanvasDisplayRatio2;oldWidth2=ControlCanvasLogic.width;canvasControls.width=oldWidth2*GraphCanvasDisplayRatio2;canvasControls.height=ControlCanvasLogic.height*GraphCanvasDisplayRatio2;canvasControls.style.width=oldWidth2+"px";canvasControls.style.height=ControlCanvasLogic.height+"px";context2.scale(GraphCanvasDisplayRatio2,GraphCanvasDisplayRatio2);for(i=0;i<buttons.length;i++){buttons[i].X=(containerWidth/(buttons.length+1))*(i+1)}if(desktop){textHeight=$(window).height()-$("#text").offset().top;$("#text").height(textHeight)}icon.ZoomIn.x=(canvasControls.width/GraphCanvasDisplayRatio2)-(canvasControls.height/GraphCanvasDisplayRatio2)*structure.iconPadding;icon.ZoomIn.y=(canvasControls.height/GraphCanvasDisplayRatio2)*structure.iconPadding;icon.ZoomOut.x=(canvasControls.width/GraphCanvasDisplayRatio2)-(canvasControls.height/GraphCanvasDisplayRatio2)*structure.iconPadding;icon.ZoomOut.y=(canvasControls.height/GraphCanvasDisplayRatio2)*(1-structure.iconPadding);icon.refresh.x=(canvasControls.width/GraphCanvasDisplayRatio2)-structure.refreshRatio*(canvasControls.height/GraphCanvasDisplayRatio2)*structure.iconPadding;icon.refresh.y=(canvasControls.height/GraphCanvasDisplayRatio2)*structure.iconPadding;if(desktop){structure.ratio=(icon.refresh.x-(canvasControls.height/GraphCanvasDisplayRatio2)*structure.iconPadding*0.5)/(canvasControls.width/GraphCanvasDisplayRatio2)}else{structure.ratio=(icon.refresh.x+1.5*buttonsDefault.W-(canvasControls.height/GraphCanvasDisplayRatio2)*structure.iconPadding*0.5)/(canvasControls.width/GraphCanvasDisplayRatio2)}for(i=0;i<=2;i++){buttons[butArray[i]].X=((canvasControls.width/GraphCanvasDisplayRatio2)*structure.ratio)*(1-2*structure.buttonPadding)*i/2+structure.buttonPadding*(canvasControls.width/GraphCanvasDisplayRatio2)*structure.ratio;buttons[butArray[i]].Y=((canvasControls.height/GraphCanvasDisplayRatio2)-buttons[butArray[i]].H)*structure.verticalRatio}if(desktop===false){structure.buttonDistanceX=buttons.d.X-buttons.s.X}}function whiteRefresh(){context1.beginPath();context1.fillStyle="white";context1.fillRect(0,0,canvasGraph.width,canvasGraph.height)}function whiteRefresh2(){context2.beginPath();context2.fillStyle="white";context2.fillRect(0,0,canvasControls.width,canvasControls.height)}function unitFunc(){return(padding.top+ID.height-graphScale)}function round10fixed(x){var decimal=1;if(x>=10){decimal=0}return(Math.round((x)*10)/10).toFixed(decimal)}function round100fixed(x){var decimal=2;if(x>=10){decimal=1}if(x>=100){decimal=0}return(Math.round((x)*100)/100).toFixed(decimal)}function round10(x){return(Math.round((x)*10)/10).toFixed(1)}function round100(x){return(Math.round((x)*100)/100).toFixed(2)}function round10000(x){return(Math.round((x)*10000)/10000)}function getMousePos(canvas,evt){var rect=canvas.getBoundingClientRect();return{x:Math.round(evt.clientX-rect.left),y:Math.round(evt.clientY-rect.top)}}function rgbToHex(r,g,b){if(r>255||g>255||b>255){throw"Invalid color component"}return((r<<16)|(g<<8)|b).toString(16)}function Point(x,y,color,size){context1.fillStyle=color||"black";context1.beginPath();context1.arc(x,y,size,0,2*Math.PI,true);context1.fill()}function plotX(x){return x*key*v.unit+padding.left}function plotY(y){return(canvasGraph.height/GraphCanvasDisplayRatio-padding.bottom)-y*key*v.unit}function plotRX(x){return(x-padding.left)/(key*v.unit)}function plotRY(y){return(canvasGraph.height/GraphCanvasDisplayRatio-padding.bottom-y)/(key*v.unit)}function graphX(x){return x-padding.left}function graphY(y){return canvasGraph.height-padding.bottom-y}function bTop(buttonObject,mouse){return mouse.x>(buttonObject.X-buttonObject.W)&&mouse.x<(buttonObject.X+buttonObject.W)&&mouse.y>buttonObject.Y&&mouse.y<(buttonObject.Y+((1-buttonObject.ratio1)/2)*buttonObject.H)}function bBot(buttonObject,mouse){return mouse.x>(buttonObject.X-buttonObject.W)&&mouse.x<(buttonObject.X+buttonObject.W)&&mouse.y<(buttonObject.Y+buttonObject.H)&&mouse.y>(buttonObject.Y+buttonObject.H-((1-buttonObject.ratio1)/2)*buttonObject.H)}function bMid(buttonObject,mouse){return mouse.x>(buttonObject.X-buttonObject.W)&&mouse.x<(buttonObject.X+buttonObject.W)&&mouse.y>(buttonObject.Y+((1-buttonObject.ratio1)/2)*buttonObject.H)&&mouse.y<(buttonObject.Y+buttonObject.H-((1-buttonObject.ratio1)/2)*buttonObject.H)}function bTopM(buttonObject,mouse){return mouse.x>(buttonObject.X-(structure.buttonDistanceX/2))&&mouse.x<(buttonObject.X+structure.buttonDistanceX/2)&&mouse.y<structure.halfHeight}function bBotM(buttonObject,mouse){return mouse.x>(buttonObject.X-(structure.buttonDistanceX/2))&&mouse.x<(buttonObject.X+(structure.buttonDistanceX/2))&&mouse.y>structure.halfHeight}function symbolTouchUpdate(){if(ControlCanvasLogic.width-structure.halfHeight<m.c.touch.x&&structure.halfHeight>m.c.touch.y){icon.ZoomIn.touch=true}else{icon.ZoomIn.touch=false}if(ControlCanvasLogic.width-structure.halfHeight<m.c.touch.x&&structure.halfHeight<m.c.touch.y){icon.ZoomOut.touch=true}else{icon.ZoomOut.touch=false}if(ControlCanvasLogic.width-2*structure.halfHeight<m.c.touch.x&&ControlCanvasLogic.width-structure.halfHeight>m.c.touch.x&&structure.halfHeight>m.c.touch.y){icon.refresh.touch=true}else{icon.refresh.touch=false}}function buttonTouchPosUpdate(){if(bTopM(buttons.s,m.c.touch)&&v.savings<1&&hypoInter.a.savings.increase.x<max.x&&hypoInter.b.savings.increase.y<max.y){buttons.s.topM=true}else{buttons.s.topM=false}if(bBotM(buttons.s,m.c.touch)&&v.savings>0){buttons.s.botM=true}else{buttons.s.botM=false}if(bTopM(buttons.d,m.c.touch)&&v.dep<1){buttons.d.topM=true}else{buttons.d.topM=false}if(bBotM(buttons.d,m.c.touch)&&v.dep>0&&hypoInter.a.depreciation.decrease.x<max.x&&hypoInter.b.depreciation.decrease.y<max.y){buttons.d.botM=true}else{buttons.d.botM=false}if(bTopM(buttons.t,m.c.touch)&&v.tech<v.t.max&&hypoInter.b.technology.increase.y<max.y&&hypoInter.a.technology.increase.x<max.x){buttons.t.topM=true}else{buttons.t.topM=false}if(bBotM(buttons.t,m.c.touch)&&v.tech>0){buttons.t.botM=true}else{buttons.t.botM=false}}function buttonPosUpdate(){if(bTop(buttons.s,m.c.pos)&&v.savings<1&&hypoInter.a.savings.increase.x<max.x&&hypoInter.b.savings.increase.y<max.y){buttons.s.topD=true}else{buttons.s.topD=false}if(bBot(buttons.s,m.c.pos)&&v.savings>0){buttons.s.botD=true}else{buttons.s.botD=false}if(bTop(buttons.d,m.c.pos)&&v.dep<1){buttons.d.topD=true}else{buttons.d.topD=false}if(bBot(buttons.d,m.c.pos)&&v.dep>0&&hypoInter.a.depreciation.decrease.x<max.x&&hypoInter.b.depreciation.decrease.y<max.y){buttons.d.botD=true}else{buttons.d.botD=false}if(bTop(buttons.t,m.c.pos)&&v.tech<v.t.max&&hypoInter.b.technology.increase.y<max.y&&hypoInter.a.technology.increase.x<max.x){buttons.t.topD=true}else{buttons.t.topD=false}if(bBot(buttons.t,m.c.pos)&&v.tech>0){buttons.t.botD=true}else{buttons.t.botD=false}if(bMid(buttons.s,m.c.pos)){buttons.s.midD=true}else{buttons.s.midD=false}if(bMid(buttons.d,m.c.pos)){buttons.d.midD=true}else{buttons.d.midD=false}if(bMid(buttons.t,m.c.pos)){buttons.t.midD=true}else{buttons.t.midD=false}}var scaleStart,scaleDistance,duration,scaleStartTime,scaleTime,scaleClock;var scaleSwitch=false;var scaleSize=3/4;var maxScale=4/5;function rescale(){if(rescaleRefreshAllow){if(inter.a.x>max.x&&inter.b.y<max.y){if(max.x/inter.a.x>scaleSize){scaleSize=max.x/inter.a.x}else{scaleSize=maxScale}scaleT=(((scaleSize)*max.x)/inter.a.x)*ID.scale}if(inter.b.y>max.y&&inter.a.x<max.x){if(max.y/inter.a.y>scaleSize){scaleSize=max.y/inter.b.y}else{scaleSize=maxScale}scaleT=(((scaleSize)*max.y)/inter.b.y)*ID.scale}if(inter.b.y>max.y&&inter.a.x>max.x){if(inter.b.y-max.y>inter.a.x-max.x){scaleT=(((scaleSize)*max.y)/inter.b.y)*ID.scale}else{if(max.x/inter.a.x>scaleSize){if(max.y/inter.a.y>scaleSize){scaleSize=max.y/inter.b.y}else{scaleSize=maxScale}scaleSize=max.x/inter.a.x}else{scaleSize=maxScale}scaleT=(((scaleSize)*max.x)/inter.a.x)*ID.scale}}scaleStart=ID.scale;scaleDistance=scaleT-ID.scale;scaleStartTime=Date.now();duration=400;scaleSwitch=true;m.newCursorBody="auto"}}var alphaRefresh,savingsRefresh,depRefresh,ARefresh;var rescaleRefreshAllow=true;function refresh(){scaleT=v.IDscaleSave;scaleStart=ID.scale;scaleDistance=v.IDscaleSave-ID.scale;scaleStartTime=Date.now();duration=400;scaleSwitch=true;rescaleRefreshAllow=false;setTimeout(function(){rescaleRefreshAllow=true},ease.shift.speed+10);alphaRefresh=v.a.save-v.alpha;easeInit(v.a.shift,v.alpha,alphaRefresh);savingsRefresh=v.s.save-v.savings;easeInit(v.s.shift,v.savings,savingsRefresh);depRefresh=v.d.save-v.dep;easeInit(v.d.shift,v.dep,depRefresh);ARefresh=v.t.save-v.tech;easeInit(v.t.shift,v.tech,ARefresh)}function refreshTest(){for(i=0;i<4;i++){if(range(v[Object.keys(v)[i]],v[Object.keys(v)[i+4]].save,0.05)){return true}}if(range(ID.scale,v.IDscaleSave,0.05)){return true}return false}function range(var1,var2,percent){if((Math.abs((var1/var2)-1))>percent){return true}else{return false}}function scaleStatus(){return(inter.b.x>max.x)||(inter.b.y>max.y)||((inter.b.x>max.x)||(inter.b.y>max.y))}function drawButton(X,Y,letter,W,H,lWidth,alpha,colorTop,colorBottom,lineColor,fillColor,ratio1,ratio2,ratio3,font,fontRatio,index){var tHeight=((1-ratio1)/2)*H;context2.beginPath();context2.lineCap="square";context2.fillStyle=colorTop;context2.strokeStyle=colorTop;context2.lineWidth=lWidth;context2.moveTo(X,Y);context2.quadraticCurveTo(X+W,Y+(1-ratio3)*tHeight,X+W,Y+tHeight);context2.quadraticCurveTo(X,Y+(1-ratio2)*tHeight,X-W,Y+tHeight);context2.quadraticCurveTo(X-W,Y+(1-ratio3)*tHeight,X,Y);context2.fill();context2.closePath();context2.stroke();context2.beginPath();context2.lineCap="square";context2.fillStyle=colorBottom;context2.strokeStyle=colorBottom;context2.lineWidth=lWidth;context2.moveTo(X,Y+H);context2.quadraticCurveTo(X+W,Y+H-(1-ratio3)*tHeight,X+W,Y+H-tHeight);context2.quadraticCurveTo(X,Y+H-(1-ratio2)*tHeight,X-W,Y+H-tHeight);context2.quadraticCurveTo(X-W,Y+H-(1-ratio3)*tHeight,X,Y+H);context2.fill();context2.closePath();context2.stroke();context2.beginPath();context2.globalAlpha=alpha;context2.fillStyle=fillColor;context2.strokeStyle=fillColor;context2.lineWidth=0.1;context2.moveTo(X-W,Y+H-tHeight);context2.quadraticCurveTo(X,Y+H-(1-ratio2)*tHeight,X+W,Y+H-tHeight);context2.lineTo(X+W,Y+H-tHeight-index*(H-2*tHeight));context2.lineTo(X-W,Y+H-tHeight-index*(H-2*tHeight));context2.lineTo(X-W,Y+H-tHeight);context2.fill();context2.closePath();context2.stroke();context2.globalAlpha=1;context2.beginPath();context2.lineCap="square";context2.strokeStyle=lineColor;context2.lineWidth=1;context2.moveTo(X,Y);context2.quadraticCurveTo(X+W,Y+(1-ratio3)*tHeight,X+W,Y+tHeight);context2.moveTo(X,Y);context2.quadraticCurveTo(X-W,Y+(1-ratio3)*tHeight,X-W,Y+tHeight);context2.moveTo(X-W,Y+tHeight);context2.lineTo(X-W,Y+H-tHeight);context2.moveTo(X+W,Y+tHeight);context2.lineTo(X+W,Y+H-tHeight);context2.moveTo(X,Y+H);context2.quadraticCurveTo(X+W,Y+H-(1-ratio3)*tHeight,X+W,Y+H-tHeight);context2.moveTo(X,Y+H);context2.quadraticCurveTo(X-W,Y+H-(1-ratio3)*tHeight,X-W,Y+H-tHeight);context2.moveTo(X,Y+H);context2.closePath();context2.stroke();context2.beginPath();context2.lineCap="square";context2.strokeStyle=lineColor;context2.lineWidth=lWidth;context2.moveTo(X-W,Y+tHeight);context2.lineTo(X-W,Y+H-tHeight);context2.moveTo(X+W,Y+tHeight);context2.lineTo(X+W,Y+H-tHeight);context2.closePath();context2.stroke();context2.font=H/2*fontRatio+"px "+font;context2.fillStyle=grey(color.g3);context2.textAlign="center";context2.textBaseline="middle";context2.fillText(letter,X+1,Y+H/2+fireShift);context2.textAlign="start";context2.textBaseline="alphabetic"}function hypoUpdate(){hypoInter.a.savings.increase.x=round10000(Math.pow((v.dep/((v.savings+ease.shift.savingsRatio*ease.shift.size)*v.tech)),(1/(v.alpha-1))));hypoInter.a.savings.increase.y=round10000((v.savings+ease.shift.savingsRatio*ease.shift.size)*v.tech*Math.pow((v.dep/((v.savings+ease.shift.savingsRatio*ease.shift.size)*v.tech)),(v.alpha/(v.alpha-1))));hypoInter.a.savings.decrease.x=round10000(Math.pow((v.dep/((v.savings-ease.shift.savingsRatio*ease.shift.size)*v.tech)),(1/(v.alpha-1))));hypoInter.a.savings.decrease.y=round10000((v.savings-ease.shift.savingsRatio*ease.shift.size)*v.tech*Math.pow((v.dep/((v.savings-ease.shift.savingsRatio*ease.shift.size)*v.tech)),(v.alpha/(v.alpha-1))));hypoInter.b.savings.increase.x=round10000(Math.pow((v.dep/((v.savings+ease.shift.savingsRatio*ease.shift.size)*v.tech)),(1/(v.alpha-1))));hypoInter.b.savings.increase.y=round10000(v.tech*Math.pow((v.dep/((v.savings+ease.shift.savingsRatio*ease.shift.size)*v.tech)),(v.alpha/(v.alpha-1))));hypoInter.b.savings.decrease.x=round10000(Math.pow((v.dep/((v.savings-ease.shift.savingsRatio*ease.shift.size)*v.tech)),(1/(v.alpha-1))));hypoInter.b.savings.decrease.y=round10000(v.tech*Math.pow((v.dep/((v.savings-ease.shift.savingsRatio*ease.shift.size)*v.tech)),(v.alpha/(v.alpha-1))));hypoInter.a.depreciation.increase.x=round10000(Math.pow(((v.dep+ease.shift.size)/(v.savings*v.tech)),(1/(v.alpha-1))));hypoInter.a.depreciation.increase.y=round10000(v.savings*v.tech*Math.pow(((v.dep+ease.shift.size)/(v.savings*v.tech)),(v.alpha/(v.alpha-1))));hypoInter.a.depreciation.decrease.x=round10000(Math.pow(((v.dep-ease.shift.size)/(v.savings*v.tech)),(1/(v.alpha-1))));hypoInter.a.depreciation.decrease.y=round10000(v.savings*v.tech*Math.pow(((v.dep-ease.shift.size)/(v.savings*v.tech)),(v.alpha/(v.alpha-1))));hypoInter.b.depreciation.increase.x=round10000(Math.pow(((v.dep+ease.shift.size)/(v.savings*v.tech)),(1/(v.alpha-1))));hypoInter.b.depreciation.increase.y=round10000(v.tech*Math.pow(((v.dep+ease.shift.size)/(v.savings*v.tech)),(v.alpha/(v.alpha-1))));hypoInter.b.depreciation.decrease.x=round10000(Math.pow(((v.dep-ease.shift.size)/(v.savings*v.tech)),(1/(v.alpha-1))));hypoInter.b.depreciation.decrease.y=round10000(v.tech*Math.pow(((v.dep-ease.shift.size)/(v.savings*v.tech)),(v.alpha/(v.alpha-1))));hypoInter.a.technology.increase.x=round10000(Math.pow((v.dep/(v.savings*(v.tech+v.tech*ease.shift.proportionA))),(1/(v.alpha-1))));hypoInter.a.technology.increase.y=round10000(v.savings*(v.tech+v.tech*ease.shift.proportionA)*Math.pow((v.dep/(v.savings*(v.tech+v.tech*ease.shift.proportionA))),(v.alpha/(v.alpha-1))));hypoInter.a.technology.decrease.x=round10000(Math.pow((v.dep/(v.savings*(v.tech-v.tech*ease.shift.proportionA))),(1/(v.alpha-1))));hypoInter.a.technology.decrease.y=round10000(v.savings*(v.tech-v.tech*ease.shift.proportionA)*Math.pow((v.dep/(v.savings*(v.tech-v.tech*ease.shift.proportionA))),(v.alpha/(v.alpha-1))));hypoInter.b.technology.increase.x=round10000(Math.pow((v.dep/(v.savings*(v.tech+v.tech*ease.shift.proportionA))),(1/(v.alpha-1))));hypoInter.b.technology.increase.y=round10000((v.tech+v.tech*ease.shift.proportionA)*Math.pow((v.dep/(v.savings*(v.tech+v.tech*ease.shift.proportionA))),(v.alpha/(v.alpha-1))));hypoInter.b.technology.decrease.x=round10000(Math.pow((v.dep/(v.savings*(v.tech-v.tech*ease.shift.proportionA))),(1/(v.alpha-1))));hypoInter.b.technology.decrease.y=round10000((v.tech-v.tech*ease.shift.proportionA)*Math.pow((v.dep/(v.savings*(v.tech-v.tech*ease.shift.proportionA))),(v.alpha/(v.alpha-1))))}function yellowBox(){context1.strokeStyle="yellow";context1.lineWidth=1;context1.rect(padding.left,padding.top,ID.width,ID.height);context1.stroke()}function controlsYellowBox(){context2.strokeStyle="red";context2.lineWidth=1;context2.rect(controlPadding.left,controlPadding.top,canvasControls.width-(controlPadding.left+controlPadding.right),canvasControls.height-(controlPadding.top+controlPadding.bottom));context2.stroke()}function redBox(){context1.strokeStyle="red";context1.lineWidth=1;context1.rect(2,2,canvasGraph.width-5,canvasGraph.height-5);context1.stroke()}function easeOutCubic(t,b,c,d){t/=d;t--;return c*(t*t*t+1)+b}function easeOutQuint(t,b,c,d){t/=d;t--;return c*(t*t*t*t*t*t*t+1)+b}function easeInit(input,varEase,shiftS){input.startTime=Date.now();input.sStart=varEase;input.distance=shiftS;input.swtch=true}function easeControl(easingOject,variable){if(easingOject.Large){if(easingOject.easeLarge===false){easingOject.easeLarge=true;easeLine(easingOject,variable,"IN")}}else{if(easingOject.easeLarge){easingOject.easeLarge=false;easeLine(easingOject,variable,"OUT")}}}function easeLine(easingOject,startValue,dir){easingOject.startTime=Date.now();easingOject.startValue=startValue;if(dir==="IN"){easingOject.shiftSize=ease.lineWidth.size-startValue;easingOject.switch1=true;easingOject.switch2=false}else{easingOject.shiftSize=-startValue+1;easingOject.switch1=false;easingOject.switch2=true}}function lineEaseLoop(easeObject,variable){if(easeObject.switch1){easeObject.currentTime=Date.now();easeObject.clockTime=easeObject.currentTime-easeObject.startTime;if(variable==="savings"){v.s.lineRatio=easeOutQuint(easeObject.clockTime,easeObject.startValue,easeObject.shiftSize,ease.lineWidth.duration);if(easeObject.clockTime>ease.lineWidth.duration){easeObject.switch1=false;v.s.lineRatio=easeObject.startValue+easeObject.shiftSize}}if(variable==="dep"){v.d.lineRatio=easeOutQuint(easeObject.clockTime,easeObject.startValue,easeObject.shiftSize,ease.lineWidth.duration);if(easeObject.clockTime>ease.lineWidth.duration){easeObject.switch1=false;v.d.lineRatio=easeObject.startValue+easeObject.shiftSize}}if(variable==="tech"){v.t.lineRatio=easeOutQuint(easeObject.clockTime,easeObject.startValue,easeObject.shiftSize,ease.lineWidth.duration);if(easeObject.clockTime>ease.lineWidth.duration){easeObject.switch1=false;v.t.lineRatio=easeObject.startValue+easeObject.shiftSize}}}if(easeObject.switch2){easeObject.currentTime=Date.now();easeObject.clockTime=easeObject.currentTime-easeObject.startTime;if(variable==="savings"){v.s.lineRatio=easeOutQuint(easeObject.clockTime,easeObject.startValue,easeObject.shiftSize,ease.lineWidth.duration);if(easeObject.clockTime>ease.lineWidth.duration){easeObject.switch1=false;v.s.lineRatio=easeObject.startValue+easeObject.shiftSize}}if(variable==="dep"){v.d.lineRatio=easeOutQuint(easeObject.clockTime,easeObject.startValue,easeObject.shiftSize,ease.lineWidth.duration);if(easeObject.clockTime>ease.lineWidth.duration){easeObject.switch1=false;v.d.lineRatio=easeObject.startValue+easeObject.shiftSize}}if(variable==="tech"){v.t.lineRatio=easeOutQuint(easeObject.clockTime,easeObject.startValue,easeObject.shiftSize,ease.lineWidth.duration);if(easeObject.clockTime>ease.lineWidth.duration){easeObject.switch1=false;v.t.lineRatio=easeObject.startValue+easeObject.shiftSize}}}}function rgbString(colorObject){return"rgb("+colorObject.r+","+colorObject.g+","+colorObject.b+")"}function colorString(rgbObject){if((rgbObject.r===0&&rgbObject.g===0&&rgbObject.b!==0)||(rgbObject.r===rgbObject.g>0&&rgbObject.b===255)){return"blue"}if((rgbObject.g===0&&rgbObject.b===0&&rgbObject.r!==0)||(rgbObject.r===255&&rgbObject.g===rgbObject.b>0)){return"red"}if((rgbObject.r===0&&rgbObject.b===0&&rgbObject.g!==0)||(rgbObject.g===255&&rgbObject.r===rgbObject.b>0)){return"green"}if(((rgbObject.r===rgbObject.b)&&rgbObject.g===0)||(rgbObject.r===rgbObject.b===255)){return"violet"}if(((rgbObject.r===rgbObject.g)&&rgbObject.b===0)||(rgbObject.r===rgbObject.g===255)){return"yellow"}if(((rgbObject.g===rgbObject.b)&&rgbObject.r===0)||(rgbObject.g===rgbObject.b===255)){return"cyan"}if(rgbObject.r===rgbObject.g===rgbObject.b){return"grey"}if(rgbObject.r===254&&rgbObject.g===255&&rgbObject.b===255){return"X1"}if(rgbObject.r===255&&rgbObject.g===254&&rgbObject.b===255){return"X2"}if(rgbObject.r===255&&rgbObject.g===255&&rgbObject.b===254){return"X3"}else{return"OTHER"}}function convertSym(stringInput){var stringHold=stringInput;stringHold=stringHold.replace("α","&alpha;");stringHold=stringHold.replace("δ","&delta;");return stringHold}function dragUpdate(variable,expression,upperLimit,bonus){v[variable]=round10000(expression);if(v[variable]>upperLimit){v[variable]=upperLimit}else{if(v[variable]<0){v[variable]=0}}document.getElementById(variable+"Input").value=v[variable];if(bonus){v[v.property(v.index(variable)+4)].clickBonus=v.bonusSize}}function shiftEaseLoop(variableShort,variableLong,minValue,maxValue){v[variableShort].shift.current=now-v[variableShort].shift.startTime;v[variableLong]=document.getElementById(variableLong+"Input").value=(easeOutCubic(v[variableShort].shift.current,v[variableShort].shift.sStart,v[variableShort].shift.distance,ease.shift.speed));if(v[variableLong]>=maxValue){document.getElementById(variableLong+"Input").value=v[variableLong]=maxValue}if(v[variableLong]<=minValue){document.getElementById(variableLong+"Input").value=v[variableLong]=0}if(v[variableShort].shift.current>=ease.shift.speed){v[variableShort].shift.swtch=false}if(desktop){buttonPosUpdate()}if(scaleStatus()){rescale()}}function refreshEase(){icon.refresh.shift.current=now2-icon.refresh.shift.startTime;icon.refresh.shift.angle=easeOutCubic(icon.refresh.shift.current,icon.refresh.shift.sStart,icon.refresh.shift.distance,icon.refresh.shift.speed*500);if(icon.refresh.shift.angle>=180){icon.refresh.shift.swtch=false;icon.refresh.shift.angle=180}}function equationHover(){$("#EqProdtech").mouseover(function(){v.t.EqProd=round10(v.tech);$("#EqProdtech").css({"font-size":font.equation.basis*font.equation.L})});$("#EqProdtech").mouseout(function(){setTimeout(function(){v.t.EqProd=" A ";$("#EqProdtech").css({"font-size":font.equation.basis*font.equation.L})},ease.equation.hoverSpeed)});$("#EqProdalpha").mouseover(function(){v.a.EqProd=round100(v.alpha);$("#EqProdalpha").css({"font-size":font.equation.basis*font.equation.XS})});$("#EqProdalpha").mouseout(function(){setTimeout(function(){v.a.EqProd="&alpha;";$("#EqProdalpha").css({"font-size":font.equation.basis})},ease.equation.hoverSpeed)});$("#EqSSsavings").mouseover(function(){v.s.EqSS=round100(v.savings);v.t.EqSS="A";$("#EqSSsavings").css({"font-size":font.equation.basis*font.equation.S})});$("#EqSSsavings").mouseout(function(){v.s.EqSS="s ";v.t.EqSS="A ";$("#EqSSsavings").css({"font-size":font.equation.basis*font.equation.XL});$("#EqSStech").mouseover(function(){v.t.EqSS=round10(v.tech);v.s.EqSS="s";$("#EqSStech").css({"font-size":font.equation.basis*font.equation.L})})});$("#EqSStech").mouseover(function(){v.t.EqSS=round10(v.tech);v.s.EqSS="s";$("#EqSStech").css({"font-size":font.equation.basis*font.equation.L})});$("#EqSStech").mouseout(function(){v.t.EqSS=" A ";$("#EqSStech").css({"font-size":font.equation.basis*font.equation.XL})});$("#EqSSalpha").mouseover(function(){v.a.EqSS=round100(v.alpha);$("#EqSSalpha").css({"font-size":font.equation.basis*font.equation.XS})});$("#EqSSalpha").mouseout(function(){setTimeout(function(){v.a.EqSS="&alpha; ";$("#EqSSalpha").css({"font-size":font.equation.basis})},ease.equation.hoverSpeed)});$("#EqSSdep").mouseover(function(){v.d.EqSS=round100(v.dep);$("#EqSSdep").css({"font-size":font.equation.basis})});$("#EqSSdep").mouseout(function(){setTimeout(function(){v.d.EqSS=" &delta; ";$("#EqSSdep").css({"font-size":font.equation.basis*font.equation.XL})},ease.equation.hoverSpeed)})}function equationUpdate(){if(v.t.lineRatio>((ease.lineWidth.size-1)*ease.equation.updateRatio)+1&&m.alphaHover===false){v.t.EqProd=v.t.EqSS=round10(v.tech);$("#EqProdtech").css({"font-size":font.equation.basis*font.equation.L});$("#EqSStech").css({"font-size":font.equation.basis*font.equation.L})}else{v.t.EqProd=" A ";v.t.EqSS=" A ";$("#EqProdtech").css({"font-size":font.equation.basis*font.equation.XL});$("#EqSStech").css({"font-size":font.equation.basis*font.equation.XL})}if(v.t.lineRatio>((ease.lineWidth.size-1)*ease.equation.updateRatio)+1&&m.alphaHover){v.a.EqProd=round100(v.alpha);$("#EqProdalpha").css({"font-size":font.equation.basis*font.equation.XS});$("#EqSSalpha").css({"font-size":font.equation.basis*font.equation.XS})}else{v.a.EqProd="&alpha;";$("#EqProdalpha").css({"font-size":font.equation.basis});$("#EqSSalpha").css({"font-size":font.equation.basis})}if(v.s.lineRatio>((ease.lineWidth.size-1)*ease.equation.updateRatio)+1){v.s.EqSS=round100(v.savings);v.t.EqSS="A";$("#EqSSsavings").css({"font-size":font.equation.basis*font.equation.S})}else{v.s.EqSS="s";$("#EqSSsavings").css({"font-size":font.equation.basis*font.equation.XL})}if(v.t.lineRatio>((ease.lineWidth.size-1)*ease.equation.updateRatio)+1&&m.alphaHover){v.a.EqSS=round100(v.alpha)}else{v.a.EqSS="&alpha; "}if(v.d.lineRatio>((ease.lineWidth.size-1)*ease.equation.updateRatio)+1){v.d.EqSS=round100(v.dep);$("#EqSSdep").css({"font-size":font.equation.basis})}else{v.d.EqSS=" &delta; ";$("#EqSSdep").css({"font-size":font.equation.basis*font.equation.XL})}}function curveHoverLineEase(var1,var2){if(m.g.stringColor===v[var1].color.string||m.g.stringColor===v[var2].string){v[var1].lineEasing.Large=true}else{v[var1].lineEasing.Large=false}}function wrapHoverEase(var1,var2){if(m.g.stringColor===var2){v[var1].lineEasing.Large=true}}function buttonListener(varButton,variable,expression){if(buttons[varButton].topD){easeInit(v[varButton].shift,variable,expression);buttons[varButton].colorTop=(color.g3);title.upgradeStatus(window.location.pathname+"-"+v.property(v.index(varButton)-4)+"-increase",v.fullName(v.property(v.index(varButton)-4))+"-increase")}if(buttons[varButton].botD){easeInit(v[varButton].shift,variable,(-1)*expression);buttons[varButton].colorBottom=(color.g3);title.upgradeStatus(window.location.pathname+"-"+v.property(v.index(varButton)-4)+"-decrease",v.fullName(v.property(v.index(varButton)-4))+"-decrease")}if(buttons[varButton].midD){title.upgradeStatus(window.location.pathname+"-"+v.property(v.index(varButton)-4),v.fullName(v.property(v.index(varButton)-4)))}}function buttonTouch(varButton,variable,expression){if(buttons[varButton].topM){easeInit(v[varButton].shift,variable,expression);buttons[varButton].colorTop=(color.g3);title.mobileUpgrade(text[v.property(v.index(varButton)-4)].increase,window.location.pathname+"-"+v.property(v.index(varButton)-4)+"-increase",v.fullName(v.property(v.index(varButton)-4))+"-increase")}if(buttons[varButton].botM){easeInit(v[varButton].shift,variable,(-1)*expression);buttons[varButton].colorBottom=(color.g3);title.mobileUpgrade(text[v.property(v.index(varButton)-4)].decrease,window.location.pathname+"-"+v.property(v.index(varButton)-4)+"-decrease",v.fullName(v.property(v.index(varButton)-4))+"-decrease")}}function grey(percent){return"rgb("+Math.round((100-percent)/100*255)+","+Math.round((100-percent)/100*255)+","+Math.round((100-percent)/100*255)+")"}function ajax(requestName,hash){$("#textDiv").html("");$.ajax({url:requestName,success:function(content){for(i=0;i<=content.length-1;i++){if(desktop){desktopTimeout(i)}else{mobileTimeout(i)}}function desktopTimeout(i){title.log[title.logIndex-1].push(content[i]);setTimeout(function(){$('<p class="textPara">'+content[i]+"</p>").hide().appendTo("#textDiv").fadeIn(title.fadeSpeed*i)},(i*title.ajaxSpeed)/content.length)}function mobileTimeout(i){title.log[title.logIndex-1].push(content[i]);setTimeout(function(){$('<p class="textPara">'+content[i]+"</p>").appendTo("#textDiv")},(i*title.ajaxSpeed)/content.length)}if(desktop){setTimeout(function(){$(".tooltipClass").tooltip()},title.ajaxSpeed*content.length+10)}window.location.hash=hash},error:function(){$("#textDiv").html("<br>Apologies, our servers have failed to load this content.")}})}function dragTitle(varString){if(refValue*(1+text.curvePad)<v[varString]){title.setTransStatus(text[varString].increase)}else{if(refValue*(1-text.curvePad)>v[varString]){title.setTransStatus(text[varString].decrease)}}}function symbolClick(sym,titleText){if(desktop){title.setTransStatus(titleText);title.upgradeStatus(window.location.pathname+"-"+sym,titleText.replace(/\s+/g,"").replace("/",""))}else{title.mobileUpgrade(titleText,window.location.pathname+"-"+sym,titleText.replace(/\s+/g,"").replace("/",""))}}function cursorUpdate(){if(m.newCursorBody!==m.cursorBody){m.cursorBody=m.newCursorBody;$("body").css("cursor",m.cursorBody,"important")}if(m.newCursorSlider!==m.cursorSlider){m.cursorSlider=m.newCursorSlider;$(".sliderInput").css("cursor",m.cursorSlider,"important")}if(m.newCursorBack!==m.cursorBack){m.cursorBack=m.newCursorBack;$("#back").css("cursor",m.cursorBack,"important")}if(m.newCursorForward!==m.cursorForward){m.cursorForward=m.newCursorForward;$("#forward").css("cursor",m.cursorForward,"important")}}function drawIcons(){context2.textAlign="center";context2.textBaseline="middle";context2.font=icon.refresh.font+"px FontAwesome";context2.fillStyle=grey(icon.refresh.color);if(icon.refresh.shift.swtch){refreshEase()}icon.refresh.shift.angle=icon.refresh.shift.angle*(Math.PI/180);context2.save();context2.translate(icon.refresh.x,icon.refresh.y);context2.rotate(icon.refresh.shift.angle);context2.fillText(icon.refresh.symbol,0,0);context2.restore();context2.font=icon.ZoomOut.font+"px FontAwesome";context2.fillStyle=grey(icon.ZoomOut.color);context2.fillText(icon.ZoomOut.symbol,icon.ZoomOut.x,icon.ZoomOut.y);context2.font=icon.ZoomIn.font+"px FontAwesome";context2.fillStyle=grey(icon.ZoomIn.color);context2.fillText(icon.ZoomIn.symbol,icon.ZoomIn.x,icon.ZoomIn.y)}var canvasGraph=document.getElementById("canvasGraph");var context1=canvasGraph.getContext("2d");var desktop=true;var canvasLogic={width:1000,height:700};var canvasLogicConstants={width:canvasLogic.width,height:canvasLogic.height};var devicePixelRatio=window.devicePixelRatio||1;var backingStoreRatio=context1.webkitBackingStorePixelRatio||context1.mozBackingStorePixelRatio||context1.msBackingStorePixelRatio||context1.oBackingStorePixelRatio||context1.backingStorePixelRatio||1;var GraphCanvasDisplayRatio=(devicePixelRatio/backingStoreRatio)*1;var menuHeight=65;$("#Menu").height(menuHeight);var padding={top:40,bottom:70,left:70,right:50};var color={g1:20,g2:45,g3:100,table:{init:10,hover:20,click:30},symbols:60,Init:220,darken:60};var maxResize=Math.round($(window).width()-(($(window).height()-menuHeight)*(canvasLogic.width/canvasLogic.height)));if(desktop){var minPanel=336;var defaultSize=(Math.sqrt($(window).width()))*12;if(defaultSize<minPanel){defaultSize=minPanel}var splitter={minSize:minPanel,size:defaultSize,maxSize:defaultSize*1.4,divSize:10};if(splitter.size>maxResize){splitter.maxSize=splitter.size*1.2}else{splitter.maxSize=maxResize}var myLayout=$("#container").layout({center:{maxSize:1000},east:{spacing_open:splitter.divSize,resizerDragOpacity:0.5,size:splitter.size,minSize:splitter.minSize,maxSize:splitter.maxSize,closable:false,livePaneResizing:true,resizerCursor:"col-resize",onresize:function(){resizecanvasGraph();resizecanvasControls()}}});var divGraph={width:myLayout.center.state.layoutWidth,height:$(window).height()-menuHeight}}else{padding.left=20;padding.right=20;padding.bottom=20;padding.top=20;$("#rangeControl").css("display","none");var divGraph={width:$(window).width(),height:$(window).height()-menuHeight}}var ratio={curves:(canvasLogic.height-(padding.top+padding.bottom))/(canvasLogic.width-(padding.left+padding.right)),canvasGraph:canvasLogic.height/canvasLogic.width,div:divGraph.height/divGraph.width};var ID={width:canvasLogic.width-(padding.left+padding.right),height:canvasLogic.height-(padding.top+padding.bottom),axesColor:grey(color.g2),lineBasis:1.35,lineGraphRatio:1.25,scale:1.1};var v={alpha:document.getElementById("alphaInput").value,savings:document.getElementById("savingsInput").value,dep:document.getElementById("depInput").value,tech:document.getElementById("techInput").value,a:{shift:{swtch:false,startTime:0,current:0,sStart:0,distance:0},EqProd:"&alpha;",EqSS:"&alpha;",save:document.getElementById("alphaInput").value},s:{lineEasing:{switch1:false,switch2:false,Large:false,easeLarge:false},shift:{swtch:false,startTime:0,current:0,sStart:0,distance:0},color:{r:0,g:color.Init,b:0,string:"green"},wrapColor:{r:254,g:255,b:255,string:"X1"},EqSS:" s ",lineRatio:1,clickBonus:0,save:document.getElementById("savingsInput").value},d:{lineEasing:{switch1:false,switch2:false,Large:false,easeLarge:false},shift:{swtch:false,startTime:0,current:0,sStart:0,distance:0},color:{r:0,g:0,b:color.Init,string:"blue"},wrapColor:{r:255,g:254,b:255,string:"X2"},EqSS:"&delta;",lineRatio:1,clickBonus:0,save:document.getElementById("depInput").value},t:{lineEasing:{switch1:false,switch2:false,Large:false,easeLarge:false},shift:{swtch:false,startTime:0,current:0,sStart:0,distance:0},max:$("#techInput").prop("max"),color:{r:color.Init,g:0,b:0,string:"red"},wrapColor:{r:255,g:255,b:254,string:"X3"},EqProd:" A ",EqSS:" A ",lineRatio:1,clickBonus:0,save:document.getElementById("techInput").value},round10000:function(keyVar){this[keyVar]=round10000(this[keyVar])},IDscaleSave:ID.scale,P1Color:{r:0,g:color.Init,b:color.Init,string:"yellow"},P2Color:{r:color.Init,g:color.Init,b:0,string:"cyan"},wrapRatio:5,P1Bonus:0,P2Bonus:0,bonusSize:0.2,keyVar:["k","y","c","i","MPK"],unit:(canvasGraph.height/GraphCanvasDisplayRatio-padding.bottom-unitFunc())/key,property:function(i){return Object.keys(this)[i]},index:function(prop){if(this.hasOwnProperty(prop)){for(i=0;i<=7;i++){if(Object.keys(this)[i]===prop){return i}}}},colorConvert:function(color){switch(color){case this.s.color.string:return"savings";break;case this.d.color.string:return"dep";break;case this.t.color.string:return"tech";break;default:}},midName:function(letterName){switch(letterName){case"a":return"alpha";break;case"s":return"savings";break;case"d":return"dep";break;case"t":return"tech";break;default:}},fullName:function(midName){switch(midName){case"alpha":return"alpha";break;case"savings":return"savings";break;case"dep":return"depreciation";break;case"tech":return"technology";break;default:}}};var m={tag:"canvasGraph",alphaHover:false,cursorBody:"auto",newCursorBody:"auto",cursorSlider:"auto",newCursorSlider:"auto",cursorBack:"auto",newCursorBack:"auto",cursorForward:"auto",newCursorForward:"auto",g:{pos:{x:1000,y:0},rgb:"",stringColor:"",stringColorClick:"",newHoverVar:"none",hoverVar:"none",hoverDefault:"none",indexColor:{k:color.g2,K:color.g2,i:color.g2,y:color.g2,Y:color.g2,none:color.g2},indexSize:{k:1,K:1,i:1,y:1,Y:1,none:1},padding:{x1:0,x2:0,X:0,y1:0,y2:0,y3:0,Y:0,paddingRatio:0.9,indexRatio:1.2},hoverUpdate:function(){this.padding.x1=plotX(inter.a.x)-padding.left;this.padding.x2=(canvasGraph.width/GraphCanvasDisplayRatio)-padding.right-plotX(inter.a.x);this.padding.X=Math.min(this.padding.x1,this.padding.x2)/2;this.padding.y1=(canvasGraph.height/GraphCanvasDisplayRatio)-padding.bottom-plotY(inter.a.y);this.padding.y2=plotY(inter.a.y)-plotY(inter.b.y);this.padding.y3=plotY(inter.b.y)-padding.top;this.padding.Y=Math.min(this.padding.y1,this.padding.y2,this.padding.y3)/2;if(m.tag==="canvasGraph"){if(this.pos.x>(canvasGraph.width/GraphCanvasDisplayRatio)-padding.right-this.padding.X*this.padding.paddingRatio&&this.pos.y>(canvasGraph.height/GraphCanvasDisplayRatio)-padding.bottom*this.padding.indexRatio){this.newHoverVar="K"}else{if(this.pos.x>plotX(inter.a.x)-this.padding.X*this.padding.paddingRatio&&this.pos.x<plotX(inter.a.x)+this.padding.X*this.padding.paddingRatio&&this.pos.y>(canvasGraph.height/GraphCanvasDisplayRatio)-padding.bottom*this.padding.indexRatio){this.newHoverVar="k"}else{if(this.pos.y>plotY(inter.a.y)-this.padding.Y*this.padding.paddingRatio&&this.pos.y<plotY(inter.a.y)+this.padding.Y*this.padding.paddingRatio&&this.pos.x<padding.left){this.newHoverVar="i"}else{if(this.pos.y>plotY(inter.b.y)-this.padding.Y*this.padding.paddingRatio&&this.pos.y<plotY(inter.b.y)+this.padding.Y*this.padding.paddingRatio&&this.pos.x<padding.left*this.padding.indexRatio){this.newHoverVar="y"}else{if(this.pos.y<padding.top+this.padding.Y*this.padding.paddingRatio&&this.pos.x<padding.left*this.padding.indexRatio){this.newHoverVar="Y"}else{this.newHoverVar=this.hoverDefault}}}}}}if(this.hoverVar!==this.newHoverVar){$("#var-"+v.keyVar[$.inArray(m.g.hoverVar,v.keyVar)]).parent().css("background-color",grey(color.table.init));this.indexColor[this.hoverVar]=color.g2;this.indexSize[this.hoverVar]=1;this.hoverVar=this.newHoverVar;this.indexColor[this.hoverVar]=100;this.indexSize[this.hoverVar]=1.05;if(this.hoverVar===this.hoverDefault){title.revertTransStatus()}else{title.setTransStatus(text.keyVar[m.g.hoverVar])}if($.inArray(m.g.hoverVar,v.keyVar)>-1){$("#var-"+v.keyVar[$.inArray(m.g.hoverVar,v.keyVar)]).parent().css("background-color",grey(color.table.hover))}}if(m.tag==="canvasGraph"&&m.g.hoverVar!==m.g.hoverDefault){m.newCursorBody="pointer"}}},c:{pos:{x:"",y:""},touch:{}}};var ease={shift:{size:0.1,speed:300,savingsRatio:1.2,proportionA:0.1},lineWidth:{size:1.3,duration:2000},equation:{updateRatio:0.8,hoverSpeed:200,ID:["EqProd","EqSS"]},zoom:{allowIn:true,proportion:0.2,allowUpdate:function(){if(plotX(inter.b.x*(1+ease.zoom.proportion))>plotX(max.x)||plotY(inter.b.y*(1+ease.zoom.proportion))<plotY(max.y)){this.inAllow=false}else{this.inAllow=true}},ease:function(input){if(rescaleRefreshAllow){scaleT=ID.scale*input;scaleStart=ID.scale;scaleDistance=scaleT-ID.scale;scaleStartTime=Date.now();duration=300;scaleSwitch=true}}}};var inter={a:{},b:{},compute:function(){this.a.x=Math.pow((v.dep/(v.savings*v.tech)),(1/(v.alpha-1)));this.a.y=v.savings*v.tech*Math.pow((v.dep/(v.savings*v.tech)),(v.alpha/(v.alpha-1)));this.b.x=Math.pow((v.dep/(v.savings*v.tech)),(1/(v.alpha-1)));this.b.y=v.tech*Math.pow((v.dep/(v.savings*v.tech)),(v.alpha/(v.alpha-1)))}};var hypoInter={a:{savings:{increase:{},decrease:{}},depreciation:{increase:{},decrease:{}},technology:{increase:{},decrease:{}}},b:{savings:{increase:{},decrease:{}},depreciation:{increase:{},decrease:{}},technology:{increase:{},decrease:{}}},compute:function(){hypoUpdate()}};var max={x:round10000(ID.width/(v.unit*key)),y:round10000(ID.height/(v.unit*key)),compute:function(){this.x=round10000(ID.width/(v.unit*key));this.y=round10000(ID.height/(v.unit*key))}};var box={k:"k",y:"y",c:"c",i:"i",MPK:"MPK",update:function(varLetter,expression){box[varLetter]=round100fixed(expression);if($("#var-"+varLetter).text()!==varLetter+": "+box[varLetter]){$("#var-"+varLetter).text(varLetter+": "+box[varLetter])}}};var title={p:$("#textTitle").text(),t:"",log:[],logIndex:0,ajaxStatus:"none",ajaxSpeed:200,fadeSpeed:100,swtch:false,nav:{back:false,forward:false,hoverBackGrey:70,hoverForwardGrey:70,defaultGrey:70},setTransStatus:function(text){this.swtch=true;this.t=text},revertTransStatus:function(){this.swtch=false},upgradeStatus:function(ajaxRequest,hashValue,logBoolean){this.p=this.t;this.swtch=false;document.getElementById("textDiv").scrollTop=0;if(ajaxRequest!==this.ajaxStatus){this.log.push([this.p,ajaxRequest,hashValue]);this.logIndex=this.log.length;ajax(ajaxRequest,hashValue);this.ajaxStatus=ajaxRequest}},pushStatus:function(text){this.p=text},value:function(){if(this.swtch){return this.t}else{return this.p}},update:function(){if($("#textTitle").text()!==this.value()){$("#textTitle").fadeOut(5,function(){$("#textTitle").text(title.value()).fadeIn(title.fadeSpeed,"linear")})}if(title.logIndex>=2){this.nav.back=true;m.newCursorBack="pointer";this.nav.hoverBackGrey=100}else{this.nav.back=false;m.newCursorBack="auto";this.nav.hoverBackGrey=70}if(title.logIndex<title.log.length){this.nav.forward=true;m.newCursorForward="pointer";this.nav.hoverForwardGrey=100}else{this.nav.forward=false;m.newCursorForward="auto";this.nav.hoverForwardGrey=70}}};var text={alpha:{increase:"Increase in Alpha",decrease:"Decrease in Alpha"},dep:{increase:"Increase in Depreciation",decrease:"Decrease in Depreciation",curve:"The Depreciation Function"},savings:{increase:"Increase in Savings",decrease:"Decrease in Savings",curve:"The Savings Function"},tech:{increase:"Technological progress",decrease:"Technological decline",curve:"The Production Function"},inputVar:{alpha:"Alpha",savings:"The Savings Rate",dep:"The Depreciation Rate",tech:"Technology/Labour efficiency"},keyVar:{k:"Steady-State Capital/Worker",k2:"Steady-State Capital/Worker",y:"Steady-State Output/Worker",c:"Steady-State Consumption/Worker",i:"Steady-State Investment/Worker",MPK:"Marginal Product of Capital",K:"Capital/Worker",Y:"Output/Worker"},index:{x:"k",y:"y"},equations:{EqProd:["Y","K","tech","alpha"],EqSS:["savings","tech","k","alpha","dep","k2"]},curvePad:0.05,varAccess:function(input){for(index in this.inputVar){if(index===input){return"inputVar"}}for(index2 in this.keyVar){if(index2===input){return"keyVar"}}},hashHandler:function(input){if(this.inputVar.hasOwnProperty(input)){return v.fullName(input)}else{return this.keyVar[input].replace(/\s+/g,"").replace("/","")}}};var font={equation:{basis:19,XS:0.75,S:0.95,L:1.05,XL:1.1},symbol:17,table:16,title:{weight:700,size:19},content:16,index:18,indexScale:1.5,paddingRatio:1,indexRatio:1.5};$("#equationsDiv").css({"font-size":font.equation.basis});$(".symbolText").css("fontSize",font.symbol);$(".data").css("fontSize",font.table);$("#textTitle").css("fontSize",font.title.size);$("#textTitle").css("font-weight",font.title.weight);$("#textDiv").css("fontSize",font.content);var active=true;$(window).focus(function(){active=true;m.newCursorBody=m.newCursorSlider="auto"});$(window).blur(function(){active=false;m.newCursorBody=m.newCursorSlider="auto"});var now=Date.now();var scaleT=ID.scale;var lineWidth={axes:0,graph:0};var sizeLimit={width:200,height:400};equationHover();$("#alphaInput").mouseenter(function(){v.t.lineEasing.Large=true;m.alphaHover=true});$("#alphaInput").mouseleave(function(){v.t.lineEasing.Large=false;setTimeout(function(){m.alphaHover=false},ease.equation.updateRatio*500)});for(i=1;i<4;i++){(function(i){$("#"+Object.keys(v)[i]+"Input").mouseenter(function(){v[Object.keys(v)[i+4]].lineEasing.Large=true});$("#"+Object.keys(v)[i]+"Input").mouseleave(function(){v[Object.keys(v)[i+4]].lineEasing.Large=false})}(i))}var sliderDown=false;for(i=0;i<4;i++){(function(i){$("#"+Object.keys(v)[i]+"Input").on("mousedown",function(){refValue=v[Object.keys(v)[i]];sliderDown=true});$("#"+Object.keys(v)[i]+"Input").on("mousemove",function(){if(sliderDown){if(refValue<v[Object.keys(v)[i]]){title.setTransStatus(text[Object.keys(v)[i]].increase)}else{title.setTransStatus(text[Object.keys(v)[i]].decrease)}}});$("#"+Object.keys(v)[i]+"Input").on("mouseup",function(){if(title.swtch===true){if(refValue<v[Object.keys(v)[i]]){title.upgradeStatus(window.location.pathname+"-"+v.property(i)+"-increase",v.fullName(v.property(i))+"-increase")}else{title.upgradeStatus(window.location.pathname+"-"+v.property(i)+"-decrease",v.fullName(v.property(i))+"-decrease")}}sliderDown=false;rescale()})}(i))}for(i=0;i<v.keyVar.length;i++){(function(i){$("#var-"+v.keyVar[i]).mouseenter(function(){m.g.newHoverVar=v.keyVar[i];title.setTransStatus(text.keyVar[v.keyVar[i]]);$("#var-"+v.keyVar[i]).parent().css("background-color",grey(color.table.hover))}).mouseleave(function(){$("#var-"+v.keyVar[i]).parent().css("background-color",grey(color.table.init))});$("#var-"+v.keyVar[i]).mousedown(function(){title.upgradeStatus(window.location.pathname+"-"+v.keyVar[i],text.keyVar[v.keyVar[i]].replace(/\s+/g,"").replace("/",""));$("#var-"+v.keyVar[i]).parent().css("background-color",grey(color.table.click))}).mouseup(function(){$("#var-"+v.keyVar[i]).parent().css("background-color",grey(color.table.hover))})}(i))}$("#tableContainerDiv").mouseleave(function(){title.revertTransStatus();m.g.newHoverVar=m.g.hoverDefault});for(i=0;i<4;i++){(function(i){$("#"+v.property(i)+"InputSymbol").mouseenter(function(){title.setTransStatus(text.inputVar[v.property(i)])});$("#"+v.property(i)+"InputSymbol").mousedown(function(){title.upgradeStatus(window.location.pathname+"-"+v.property(i),v.fullName(v.property(i)))})}(i))}$(".sliderRow").mouseleave(function(){title.revertTransStatus()});for(Eq in text.equations){(function(Eq){for(i=0;i<text.equations[Eq].length;i++){(function(i){$("#"+Eq+text.equations[Eq][i]).mouseenter(function(){title.setTransStatus(text[text.varAccess(text.equations[Eq][i])][text.equations[Eq][i]])});$("#"+Eq+text.equations[Eq][i]).mousedown(function(){title.upgradeStatus(window.location.pathname+"-"+text.equations[Eq][i],text.hashHandler(text.equations[Eq][i]))})}(i))}$("#"+Eq).mouseleave(function(){title.revertTransStatus()})}(Eq))}$("#back").mousedown(function(){if(title.nav.back){title.logIndex-=1;title.pushStatus(title.log[title.logIndex-1][0]);title.ajaxStatus=title.log[title.logIndex-1][1];$("#textTitle").text(title.log[title.logIndex-1][0]);$("#textDiv").html("");for(i=3;i<title.log[title.logIndex-1].length;i++){$("#textDiv").append('<p class="textPara">'+title.log[title.logIndex-1][i]+"</p>")}$(".tooltipClass").tooltip()}});$("#forward").mousedown(function(){if(title.nav.forward){title.logIndex+=1;title.pushStatus(title.log[title.logIndex-1][0]);title.ajaxStatus=title.log[title.logIndex-1][1];$("#textTitle").text(title.log[title.logIndex-1][0]);$("#textDiv").html("");for(i=3;i<title.log[title.logIndex-1].length;i++){$("#textDiv").append('<p class="textPara">'+title.log[title.logIndex-1][i]+"</p>")}$(".tooltipClass").tooltip()}});$("#back").hover(function(){$("#back").css("color",grey(title.nav.hoverBackGrey))},function(){$("#back").css("color",grey(title.nav.defaultGrey))});$("#forward").hover(function(){$("#forward").css("color",grey(title.nav.hoverForwardGrey))},function(){$("#forward").css("color",grey(title.nav.defaultGrey))});$("input").on("input",function(){rescaleStatus=scaleStatus();if(rescaleStatus){m.newCursorSlider="not-allowed"}else{m.newCursorSlider="pointer"}});$("input").on("mouseup",function(){m.newCursorSlider="pointer"});if(desktop){var rgbObj,message3,p;var rescaleStatus=false;var mousePos={x:0,y:0};var tags=["Menu","canvasGraph","canvasControls","sliderDiv","equationsDiv","vectorDiv","text"];for(idx=0;idx<=tags.length-1;idx++){(function(i){$("#"+tags[i]).mouseenter(function(){m.tag=tags[i];m.newCursorBody="auto"})})(idx)}canvasGraph.addEventListener("mousemove",function(evt){m.g.pos=getMousePos(canvasGraph,evt);p=context1.getImageData(GraphCanvasDisplayRatio*m.g.pos.x,GraphCanvasDisplayRatio*m.g.pos.y,1,1).data;m.g.rgb="rgb("+p[0]+","+p[1]+","+p[2]+")";rgbObj={r:p[0],g:p[1],b:p[2]};if(m.g.stringColor!==colorString(rgbObj)&&clickTrue===false&&m.g.hoverVar==="none"){m.g.stringColor=colorString(rgbObj);if(text[v.colorConvert(m.g.stringColor)]!=undefined){title.setTransStatus(text[v.colorConvert(m.g.stringColor)].curve)}else{title.revertTransStatus()}}},false);var clickTrue=false;var refValue;canvasGraph.addEventListener("mousedown",function(evt){clickTrue=true;m.g.stringColorClick=m.g.stringColor;refValue=v[v.colorConvert(m.g.stringColorClick)];if(m.g.hoverVar!=="none"){title.upgradeStatus(window.location.pathname+"-"+m.g.hoverVar,text.keyVar[m.g.hoverVar].replace(/\s+/g,"").replace("/",""))}},false);canvasGraph.addEventListener("mouseup",function(evt){clickTrue=false;rescale();v.s.clickBonus=v.d.clickBonus=v.t.clickBonus=v.P1Bonus=v.P2Bonus=0;if((v.colorConvert(m.g.stringColorClick))!=undefined){if(refValue*(1+text.curvePad)<v[v.colorConvert(m.g.stringColorClick)]){title.upgradeStatus(window.location.pathname+"-"+v.colorConvert(m.g.stringColorClick)+"-increase",v.fullName(v.colorConvert(m.g.stringColorClick))+"-increase")}else{if(refValue*(1-text.curvePad)>v[v.colorConvert(m.g.stringColorClick)]){title.upgradeStatus(window.location.pathname+"-"+v.colorConvert(m.g.stringColorClick)+"-decrease",v.fullName(v.colorConvert(m.g.stringColorClick))+"-decrease")}else{title.upgradeStatus(window.location.pathname+"-"+v.colorConvert(m.g.stringColorClick)+"-function",v.fullName(v.colorConvert(m.g.stringColorClick))+"-function")}}}},false)}resizecanvasGraph();window.addEventListener("resize",resizecanvasGraph,false);function gameLoop(){requestAnimFrame(gameLoop);drawScreen()}gameLoop();function drawScreen(){title.update();v.round10000("alpha");v.round10000("savings");v.round10000("dep");v.round10000("tech");key=((oldWidth*GraphCanvasDisplayRatio)-GraphCanvasDisplayRatio*(padding.left+padding.right))/((canvasLogicConstants.width-(padding.left+padding.right))*GraphCanvasDisplayRatio);v.unit=((oldHeight*GraphCanvasDisplayRatio)/GraphCanvasDisplayRatio-padding.bottom-unitFunc())/key;if(desktop){if(clickTrue){if(m.g.stringColorClick===v.d.color.string){dragUpdate("dep",((plotRY(m.g.pos.y))/(plotRX(m.g.pos.x))),1,true);dragTitle("dep")}if(m.g.stringColorClick===v.s.color.string){dragUpdate("savings",(plotRY(m.g.pos.y))/(v.tech*Math.pow(plotRX(m.g.pos.x),v.alpha)),1,true);dragTitle("savings")}if(m.g.stringColorClick===v.t.color.string){dragUpdate("tech",(plotRY(m.g.pos.y))/Math.pow(plotRX(m.g.pos.x),v.alpha),v.t.max,true);dragTitle("tech")}if(m.g.stringColorClick===v.P2Color.string){dragUpdate("tech",(plotRY(m.g.pos.y))/Math.pow(plotRX(m.g.pos.x),v.alpha),v.t.max,false);v.savings=((plotRX(m.g.pos.x)*v.dep)/(plotRY(m.g.pos.y)));document.getElementById("savingsInput").value=v.savings;v.P2Bonus=v.bonusSize}if(m.g.stringColorClick===v.P1Color.string){dragUpdate("dep",((plotRY(m.g.pos.y))/(plotRX(m.g.pos.x))),1,false);dragUpdate("savings",(plotRY(m.g.pos.y))/(v.tech*Math.pow(plotRX(m.g.pos.x),v.alpha)),1,false);v.P1Bonus=v.bonusSize}if(m.tag!=="canvasGraph"){clickTrue=false;title.revertTransStatus();m.g.stringColor=m.g.stringColorClick="OTHER";v.s.clickBonus=v.d.clickBonus=v.t.clickBonus=v.P1Bonus=v.P2Bonus=0;rescale()}rescaleStatus=scaleStatus()}if(m.tag==="canvasGraph"){m.newCursorBody="auto"}if(m.g.stringColor===v.s.color.string||m.g.stringColor===v.d.color.string||m.g.stringColor===v.t.color.string||m.g.stringColor===v.P2Color.string||m.g.stringColor===v.P1Color.string||(clickTrue&&(m.g.stringColorClick===v.s.color.string||m.g.stringColorClick===v.d.color.string||m.g.stringColorClick===v.t.color.string||m.g.stringColorClick===v.P2Color.string||m.g.stringColorClick===v.P1Color.string))){m.newCursorBody="pointer"}if(rescaleStatus){m.newCursorBody="not-allowed";rescaleStatus=scaleStatus()}if(m.tag!=="canvasControls"&&m.tag!=="sliderDiv"){curveHoverLineEase("t","P2Color");curveHoverLineEase("s","P1Color");curveHoverLineEase("d","P1Color");wrapHoverEase("s","X1");wrapHoverEase("d","X2");wrapHoverEase("t","X3")}for(i=1;i<=3;i++){easeControl(v[v.property(i+4)].lineEasing,v[v.property(i+4)].lineRatio);lineEaseLoop(v[v.property(i+4)].lineEasing,v.property(i))}v.s.color.g=color.Init+Math.round(color.darken*(v.s.lineRatio-1+v.s.clickBonus));v.d.color.b=color.Init+Math.round(color.darken*(v.d.lineRatio-1+v.d.clickBonus));v.t.color.r=color.Init+Math.round(color.darken*(v.t.lineRatio-1+v.t.clickBonus));v.P1Color.g=v.P1Color.b=color.Init+Math.round(color.darken*(v.t.lineRatio-1+v.t.clickBonus));v.P2Color.r=v.P2Color.g=color.Init+Math.round(color.darken*((Math.max(v.d.lineRatio,v.s.lineRatio)-1+Math.max(v.d.clickBonus,v.s.clickBonus))))}for(i=0;i<=3;i++){v[Object.keys(v)[i]]=round10000(document.getElementById(Object.keys(v)[i]+"Input").value)}now=Date.now();if(v.a.shift.swtch){shiftEaseLoop("a","alpha",0,1)}if(v.s.shift.swtch){shiftEaseLoop("s","savings",0,1)}if(v.d.shift.swtch){shiftEaseLoop("d","dep",0,1)}if(v.t.shift.swtch){shiftEaseLoop("t","tech",0,v.t.max)}if(scaleSwitch){scaleTime=Date.now();scaleClock=scaleTime-scaleStartTime;ID.scale=easeOutCubic(scaleClock,scaleStart,scaleDistance,duration);if(scaleClock>=duration){scaleSwitch=false;ID.scale=scaleT;m.newCursorBody="auto"}graphScale=ID.height*ID.scale/10}if(m.tag!=="equationsDiv"){equationUpdate()}for(i=0;i<=3;i++){for(eq=0;eq<=(ease.equation.ID.length-1);eq++){if(document.getElementById(ease.equation.ID[eq]+Object.keys(v)[i])!==null){if(convertSym($("#"+ease.equation.ID[eq]+Object.keys(v)[i]).html())!==v[Object.keys(v)[i+4]][ease.equation.ID[eq]]){$("#"+ease.equation.ID[eq]+Object.keys(v)[i]).html(v[Object.keys(v)[i+4]][ease.equation.ID[eq]])}}}}m.g.hoverUpdate();cursorUpdate();ease.zoom.allowUpdate();max.compute();inter.compute();hypoInter.compute();box.update("k",inter.a.x);box.update("y",inter.b.y);box.update("c",inter.b.y-inter.a.y);box.update("i",inter.a.y);box.update("MPK",v.tech*v.alpha*Math.pow(inter.a.x,v.alpha-1));whiteRefresh();Graph(function graph(x){return v.tech*Math.pow(x,v.alpha)},rgbString(v.t.wrapColor),0.5,v.wrapRatio*lineWidth.graph);Graph(function graph(x){return v.tech*v.savings*Math.pow(x,v.alpha)},rgbString(v.s.wrapColor),0.5,v.wrapRatio*lineWidth.graph);Graph(function graph(x){return v.dep*x},rgbString(v.d.wrapColor),0.1,v.wrapRatio*lineWidth.graph);showAxes();if(desktop){unitIndex(1)}dottedIndex();Graph(function graph(x){return v.tech*Math.pow(x,v.alpha)},rgbString(v.t.color),1,lineWidth.graph*(v.t.lineRatio+v.t.clickBonus));Graph(function graph(x){return v.tech*v.savings*Math.pow(x,v.alpha)},rgbString(v.s.color),1,lineWidth.graph*(v.s.lineRatio+v.s.clickBonus));Graph(function graph(x){return v.dep*x},rgbString(v.d.color),0.2,lineWidth.graph*(v.d.lineRatio+v.d.clickBonus));if(inter.b.x<max.x&&inter.b.y<max.y){Point(plotX(inter.b.x),plotY(inter.b.y),rgbString(v.P1Color),lineWidth.graph*0.6*(v.t.lineRatio+v.P2Bonus))}if(inter.a.x<max.x&&inter.a.y<max.y){Point(plotX(inter.a.x),plotY(inter.a.y),rgbString(v.P2Color),lineWidth.graph*0.6*(Math.max(v.d.lineRatio,v.s.lineRatio)+v.P1Bonus))}}var canvasControls=document.getElementById("canvasControls");var context2=canvasControls.getContext("2d");var desktop=true;if(desktop){var ControlCanvasLogic={width:splitter.size,height:100}}else{var ControlCanvasLogic={width:$(window).width,height:170}}var devicePixelRatio2=window.devicePixelRatio||1;var backingStoreRatio2=context1.webkitBackingStorePixelRatio||context1.mozBackingStorePixelRatio||context1.msBackingStorePixelRatio||context1.oBackingStorePixelRatio||context1.backingStorePixelRatio||1;var GraphCanvasDisplayRatio2=(devicePixelRatio2/backingStoreRatio2)*1;var controlPadding={top:10,bottom:10,left:10,right:10};var now2=Date.now();var buttonsDefault={Y:15,W:20,H:75,lWidth:0.4,lineColor:(color.g2),ratio1:0.4,ratio2:0.3,ratio3:0.2,font:"Helvetica",fontRatio:1,ind:function(i){return Object.keys(this)[i]},draw:function(){drawButton(this.X,this.Y,this.letter,this.W,this.H,this.lWidth,this.alpha,grey(this.colorTop),grey(this.colorBottom),grey(this.lineColor),this.fillColor,this.ratio1,this.ratio2,this.ratio3,this.font,this.fontRatio,this.index)},updateHoverStatus:function(){buttonPosUpdate()}};var buttons={};buttons.s=Object.create(buttonsDefault);jQuery.extend(buttons.s,{X:60,letter:"S",alpha:0.1,colorTop:(color.g1),colorBottom:(color.g1),lineColor:(color.g2),fillColor:v.s.color.string,index:0.3,topD:false,midD:false,botD:false,topM:false,botM:false});buttons.d=Object.create(buttonsDefault);jQuery.extend(buttons.d,{X:120,letter:"δ",alpha:0.1,colorTop:(color.g1),colorBottom:(color.g1),lineColor:(color.g2),fillColor:v.d.color.string,index:0.3,topD:false,midD:false,botD:false,topM:false,botM:false});buttons.t=Object.create(buttonsDefault);jQuery.extend(buttons.t,{X:180,letter:"A",alpha:0.1,colorTop:(color.g1),colorBottom:(color.g1),lineColor:(color.g2),fillColor:v.t.color.string,index:0.3,topD:false,midD:false,botD:false,topM:false,botM:false});var butArray=["s","d","t"];var iconDefaults={x:0,y:0,hover:false,color:70,font:25};var icon={refresh:{x:iconDefaults.x,y:iconDefaults.y,hover:iconDefaults.hover,color:iconDefaults.color,font:iconDefaults.font,symbol:"\uf021",string:"Refresh",shift:{swtch:false,startTime:0,current:0,sStart:0,distance:180,angle:0,speed:1}},ZoomIn:{x:iconDefaults.x,y:iconDefaults.y,hover:iconDefaults.hover,color:iconDefaults.color,font:iconDefaults.font,symbol:"\uf00e",string:"Zoom In"},ZoomOut:{x:iconDefaults.x,y:iconDefaults.y,hover:iconDefaults.hover,color:iconDefaults.color,font:iconDefaults.font,symbol:"\uf010",string:"Zoom Out"},hoverUpdate:function(){for(i=0;i<3;i++){if(this[Object.keys(this)[i]].x+iconDefaults.font/2>m.c.pos.x&&this[Object.keys(this)[i]].x-iconDefaults.font/2<m.c.pos.x&&this[Object.keys(this)[i]].y-iconDefaults.font/2<m.c.pos.y&&this[Object.keys(this)[i]].y+iconDefaults.font/2>m.c.pos.y){this[Object.keys(this)[i]].hover=true}else{this[Object.keys(this)[i]].hover=false}}if(ease.zoom.inAllow===false){this.ZoomIn.hover=false}},listener:function(iconInput){if(ease.zoom.inAllow===false){this.ZoomIn.hover=false}if(this[iconInput].hover){switch(iconInput){case"refresh":if(refreshTest()){refresh();icon.refresh.shift.startTime=Date.now();icon.refresh.shift.sStart=0;icon.refresh.shift.distance=180;icon.refresh.shift.swtch=true}break;case"ZoomIn":ease.zoom.ease(1+ease.zoom.proportion);if(icon.ZoomIn.font<iconDefaults.font+5){icon.ZoomIn.font+=1}break;case"ZoomOut":ease.zoom.ease(1-ease.zoom.proportion);if(icon.ZoomOut.font>iconDefaults.font-5){icon.ZoomOut.font-=1}break;default:}}}};var structure={ratio:0.7,buttonPadding:0.28,refreshRatio:2.4,verticalRatio:0.6,iconPadding:0.31,buttonDistanceX:0,halfHeight:ControlCanvasLogic.height/2,iconDistance:0};if(desktop){canvasControls.addEventListener("mousemove",function(evt){m.c.pos=getMousePos(canvasControls,evt);buttons.s.updateHoverStatus();icon.hoverUpdate();for(var index in buttons){if(buttons[index].topD){buttons[index].colorTop=(color.g2);m.newCursorBody="pointer";v[index].lineEasing.Large=true;title.setTransStatus(text[v.property(v.index(index)-4)].increase)}else{buttons[index].colorTop=(color.g1)}if(buttons[index].botD){buttons[index].colorBottom=(color.g2);m.newCursorBody="pointer";v[index].lineEasing.Large=true;title.setTransStatus(text[v.property(v.index(index)-4)].decrease)}else{buttons[index].colorBottom=(color.g1)}if(buttons[index].midD){v[index].lineEasing.Large=true;title.setTransStatus(text.inputVar[v.midName(index)])}}for(i=0;i<3;i++){if(icon[Object.keys(icon)[i]].hover){m.newCursorBody="pointer";icon[Object.keys(icon)[i]].color=100;icon[Object.keys(icon)[i]].font=iconDefaults.font+1;title.setTransStatus(icon[Object.keys(icon)[i]].string)}else{icon[Object.keys(icon)[i]].font=iconDefaults.font;icon[Object.keys(icon)[i]].color=iconDefaults.color}}if(buttons.s.topD===false&&buttons.d.topD===false&&buttons.t.topD===false&&buttons.s.botD===false&&buttons.d.botD===false&&buttons.t.botD===false&&buttons.s.midD===false&&buttons.d.midD===false&&buttons.t.midD===false&&icon.refresh.hover===false&&icon.ZoomIn.hover===false&&icon.ZoomOut.hover===false){title.revertTransStatus()}if(buttons.s.topD===false&&buttons.d.topD===false&&buttons.t.topD===false&&buttons.s.botD===false&&buttons.d.botD===false&&buttons.t.botD===false&&buttons.s.midD===false&&buttons.d.midD===false&&buttons.t.midD===false&&icon.refresh.hover===false&&icon.ZoomIn.hover===false&&icon.ZoomOut.hover===false){m.newCursorBody="auto";v.s.lineEasing.Large=false;v.d.lineEasing.Large=false;v.t.lineEasing.Large=false}},false);canvasControls.addEventListener("mousedown",function(){buttonListener("s",v.savings,ease.shift.savingsRatio*ease.shift.size);buttonListener("d",v.dep,ease.shift.size);buttonListener("t",v.tech,v.tech*ease.shift.proportionA);icon.listener("refresh");icon.listener("ZoomIn");icon.listener("ZoomOut")},false)}if(desktop===false){canvasControls.addEventListener("touchstart",function(evt){var e=event;m.c.touch.x=e.targetTouches[0].pageX-canvasControls.offsetLeft;m.c.touch.y=e.targetTouches[0].pageY-canvasControls.offsetTop;buttonTouchPosUpdate();buttonTouch("s",v.savings,ease.shift.savingsRatio*ease.shift.size);buttonTouch("d",v.savings,ease.shift.size);buttonTouch("d",v.savings,v.tech*ease.shift.proportionA)},false);canvasControls.addEventListener("touchend",function(){for(i=0;i<buttons.length;i++){if(buttons[i].topM){buttons[i].colorTop=grey(color.g1)}if(buttons[i].botM){buttons[i].colorBottom=grey(color.g1)}}},false)}resizecanvasControls();window.addEventListener("resize",resizecanvasControls,false);function gameLoop2(){requestAnimFrame(gameLoop2);drawScreen2()}gameLoop2();function drawScreen2(){whiteRefresh2();now2=Date.now();if(desktop){drawIcons();for(var i in buttons){if(buttons[i.toString()].colorTop>(color.g2)){buttons[i.toString()].colorTop-=(color.g3-color.g2)/15}if(buttons[i.toString()].colorBottom>(color.g2)){buttons[i.toString()].colorBottom-=(color.g3-color.g2)/15}}buttons.s.index=v.savings;buttons.d.index=v.dep;buttons.t.index=v.tech/v.t.max;buttons.s.alpha=(v.s.lineRatio+v.s.clickBonus/2-1)/2+0.1;buttons.d.alpha=(v.d.lineRatio+v.d.clickBonus/2-1)/2+0.1;if(m.alphaHover===false){buttons.t.alpha=(v.t.lineRatio+v.t.clickBonus/2-1)/2+0.1}if(m.tag!=="canvasControls"){for(var index in buttons){buttons[index].colorBottom=(color.g1);buttons[index].colorTop=(color.g1)}}}buttons.s.draw();buttons.d.draw();buttons.t.draw()};